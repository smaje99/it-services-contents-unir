---
import { Icon } from 'astro-icon/components';

import { normalizePath, withBaseUrl } from '@/utils/path';

const tabs = [
  { id: 'overview', label: 'Inicio', icon: 'home', href: withBaseUrl('') },
  { id: 'topics', label: 'Temas', icon: 'list', href: withBaseUrl('temas') },
  { id: 'progress', label: 'Progreso', icon: 'chart-line', href: withBaseUrl('progreso') },
];

const current = normalizePath(Astro.url.pathname);
---

<nav class='nav-tabs'>
  {
    tabs.map((tab) => (
      <a href={tab.href} class={`nav-tab ${current === normalizePath(tab.href) ? 'active' : ''}`}>
        <Icon name={tab.icon} />
        {tab.label}
      </a>
    ))
  }
</nav>
<style>
  .nav-tabs {
    display: flex;
    background: var(--bg-soft);
    border-top: 1px solid var(--border-color);
    border-bottom: 1px solid var(--border-color);
  }

  .nav-tab {
    flex: 1;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.4cap;
    padding: 1rem;
    text-align: center;
    text-decoration: none;
    color: var(--text-secondary);
    transition: all 0.25s ease;
    outline: none;

    &:hover {
      background-color: var(--bg-elevated);
    }

    &.active {
      background-color: var(--bg-base);
      color: var(--brand-primary);
      border-bottom: 3px solid var(--brand-primary);
    }

    &:focus-visible {
      outline: 2px solid var(--ring);
      outline-offset: 2px;
    }
  }

  [data-icon] {
    width: 1.5cap;
    height: 1.5cap;
    display: block;
    flex-shrink: 0;
    stroke-width: 2;
  }
</style>
